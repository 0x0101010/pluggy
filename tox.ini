[tox]
envlist=check,{py26,py27,py34,py35,pypy}-{pytest27,pytest}

[testenv]
commands= py.test {posargs:testing/test_pluggy.py}
deps=
    pytest27: pytest>=2.7.0,<2.8.0
    pytest: pytest>=2.8.0


[testenv:check]
usedevelop=True
deps = pytest>=2.7.0,<2.8.0
       pytest-pep8
       pytest-flakes
       restructuredtext_lint 
commands =
    py.test --pep8
    py.test --flakes -m flakes pluggy.py testing/test_pluggy.py
    rst-lint CHANGELOG.rst README.rst


[testenv:docs]
deps =
    sphinx
    pygments

commands =
    sphinx-build \
        -b html \
        {toxinidir}/docs {toxinidir}/build/html-docs
[pytest]
minversion=2.0
#--pyargs --doctest-modules --ignore=.tox
addopts= -rxsX 
pep8ignore = E501 E128 E127
norecursedirs = .tox ja .hg .env*
